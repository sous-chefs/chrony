# Generated by Chef Infra Client. Do not hand edit

# Use public servers from the pool.ntp.org project.
# Please consider joining the pool (http://www.pool.ntp.org/join.html).
<% @servers.each do |server, options| %>
<%= "server #{server} #{options}" %>
<% end %>

# Record the rate at which the system clock gains/losses time.
driftfile <%= @driftfile %>

# Allow the system clock to be stepped in the first three updates
# if its offset is larger than 1 second.
makestep 1 3

# Enable kernel synchronization of the real-time clock (RTC).
rtcsync

# Specify directory for log files.
logdir <%= @log_dir %>

# The allow directive is used to designate a particular subnet from which NTP clients
# are allowed to access the computer as an NTP server. The default is that no clients
# are allowed access, i.e. chronyd operates purely as an NTP client. If the allow
# directive is used, chronyd will be both a client of its servers, and a server to other clients.
<% if @allow.empty? %>
allow
<% else %>
<%    @allow.each do |allowed| %>
allow <%= allowed %>
<% end %>
<% end %>

# Extra configuration
<% node['chrony']['extra_config'].each do |conf| -%>
<%= conf %>
<% end -%>
